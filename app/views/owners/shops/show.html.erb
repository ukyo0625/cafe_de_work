show

<%= attachment_image_tag @shop, :shop_image,:fill,50,50  %>
<%= @shop.shop_name %>
<%= @shop.shop_detail %>
<%= @shop.address %>

<style type="text/css">
  #map { height: 200px;
         width: 70%;}
</style>


<div id="map"></div>
<%= @shop.seat %>
<%= @shop.open_time %>
<%= @shop.close_time %>
<% @shop.holidays.each do |h| %>
 <%= holiday(h.holiday_number) %>
<% end %>
<%= @shop.phone_number %>

<h2>gmap</h2>
<!-- 地名入力用のinputを追加 -->
<!-- <input id="address" type="textbox" value="Sydney, NSW"> -->
<!-- buttonをクリックしたらcodeAddressを実行　-->
<script>
/*
mapを関数の外で定義(codeAddressでも使うため)
geocoderを用意
*/
let map
let geocoder
window.onload = function() {
initMap();
codeAddress();
}
function initMap(){
  // geocoderを初期化
  geocoder = new google.maps.Geocoder()
  map = new google.maps.Map(document.getElementById('map'), {
  center: {lat: -34.397, lng: 150.644},
  zoom: 8
  });
}
function codeAddress(){
    // geocodingしたあとmapを移動
    geocoder.geocode( { 'address': '<%= @shop.address %>'}, function(results, status) {
      if (status == 'OK') {
  // map.setCenterで地図が移動
        map.setCenter(results[0].geometry.location);
  // google.maps.MarkerでGoogleMap上の指定位置にマーカが立つ
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
}
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=<%= ENV['GOOGLE_MAP'] %>&callback=initMap"></script>
